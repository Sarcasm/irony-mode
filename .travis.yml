language: cpp

sudo: required
dist: trusty

addons:
  apt:
    sources:
      - cassou-emacs
      - sourceline: 'ppa:ubuntu-elisp/ppa'
    packages:
      - libclang-dev
      - emacs24
      - emacs-snapshot

compiler:
  - gcc
  - clang

env:
  - EMACS=emacs24
  - EMACS=emacs-snapshot

before_script:
  - mkdir build
  - cd build

script:
  - $EMACS --version
  - cmake -DEMACS_EXECUTABLE=$(which $EMACS) ../server
  - make -k
  - make check

after_script:
  - cd -
